<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>OX 퀴즈 15문제</title>
  <link rel="stylesheet" href="quiz_style.css">
</head>
<body>

  <h1>OX 퀴즈 15문제</h1>

  <!-- 사용자 정보 입력 폼 -->
<form id="user-form" class="form-container" onsubmit="startQuiz(event)">
  <h2>퀴즈를 시작하기 전에 정보를 입력해주세요!</h2>
  <p>전화번호 추첨을 통해 기프티콘 보내드리겠습니다.</p>
  <p>많은 참여 부탁드릴게요..♡</p>

  <label for="username">이름:</label>
  <input type="text" id="username" name="username" required><br><br>

  <label for="phone">전화번호:</label><br>
  <input
    type="tel"
    id="phone"
    name="phone"
    required
    pattern="^01[016789]-?\d{3,4}-?\d{4}$"
    placeholder="예: 010-1234-5678"
    title="전화번호 형식이 올바르지 않습니다. (예: 010-1234-5678 또는 01012345678)" /><br><br>

  <!-- 성별 선택 -->
  <label>성별 :</label>
  <input type="radio" id="male" name="gender" value="남성" required>
  <label for="male">남성</label>
  <input type="radio" id="female" name="gender" value="여성" required>
  <label for="female">여성</label><br><br>

  <!-- 나이대 선택 -->
  <label for="age">나이대 :</label>
  <select id="age" name="age" required>
    <option value="">선택하세요</option>
    <option value="10대">10대</option>
    <option value="20대">20대</option>
    <option value="30대">30대</option>
    <option value="40대">40대</option>
    <option value="50대">50대</option>
    <option value="60대 이상">60대 이상</option>
  </select><br><br>

  <button class="start-btn" type="submit">퀴즈 시작</button>
</form>


  <div id="quiz-container" style="display:none;">
    <!-- 문제 내용이 여기에 동적으로 삽입됩니다. -->
  </div>

  <div id="popup"></div>

  <!-- 소감문 작성 폼 -->
  <div id="final-form">
    <h2>퀴즈가 끝났습니다! 소감문을 작성해주세요:</h2>
    <textarea id="feedback" placeholder="소감을 적어주세요..."></textarea><br><br>
    <button onclick="submitFeedback()"
    style="padding: 10px 20px; font-size: 15px;">소감 제출</button>
  </div>

  <script>
    let username = '';
    let phone = '';
    let gender = '';
    let age = '';

    // 사용자 정보를 입력받고 퀴즈 시작
    function startQuiz(event) {
  event.preventDefault(); // 기본 form 제출 막기

  const form = document.getElementById("user-form");

  if (!form.checkValidity()) {
    form.reportValidity(); // 브라우저가 자동으로 경고창 띄워줌
    return false;
  }

  username = document.getElementById("username").value;
  phone = document.getElementById("phone").value;
  gender = document.querySelector('input[name="gender"]:checked')?.value;
  age = document.getElementById("age").value;

  document.getElementById("user-form").style.display = "none";
  document.getElementById("quiz-container").style.display = "block";
  loadQuestion();

  return false;
}


    // 퀴즈 데이터 (이미지 파일은 로컬에서 불러옵니다.)
     const quizData = [
      { question: "범죄자일까요?🕵️", img: "images/q1.jpg", answer: "O", info: "인물정보1" },
      { question: "범죄자일까요?🕵️", img: "images/q2.jpg", answer: "X", info: "인물정보2" },
      { question: "범죄자일까요?🕵️", img: "images/q3.jpg", answer: "O", info: "인물정보3" },
      { question: "범죄자일까요?🕵️", img: "images/q4.jpg", answer: "O", info: "인물정보4" },
      { question: "범죄자일까요?🕵️", img: "images/q5.jpg", answer: "X", info: "인물정보5" },
      { question: "범죄자일까요?🕵️", img: "images/q6.jpg", answer: "O", info: "인물정보6" },
      { question: "범죄자일까요?🕵️", img: "images/q7.jpg", answer: "X", info: "인물정보7" },
      { question: "범죄자일까요?🕵️", img: "images/q8.jpg", answer: "O", info: "인물정보8" },
      { question: "범죄자일까요?🕵️", img: "images/q9.jpg", answer: "X", info: "인물정보9" },
      { question: "범죄자일까요?🕵️", img: "images/q10.jpg", answer: "O", info: "인물정보10" },
      { question: "범죄자일까요?🕵️", img: "images/q11.jpg", answer: "X", info: "인물정보11" },
      { question: "범죄자일까요?🕵️", img: "images/q12.jpg", answer: "O", info: "인물정보12" },
      { question: "범죄자일까요?🕵️", img: "images/q13.jpg", answer: "X", info: "인물정보13" },
      { question: "범죄자일까요?🕵️", img: "images/q14.jpg", answer: "O", info: "인물정보14" },
      { question: "범죄자일까요?🕵️", img: "images/q15.jpg", answer: "X", info: "인물정보15" }
];


    let currentQuestion = 0; // 현재 문제 번호
    let score = 0; // 점수

    // 팝업을 표시하는 함수
    function showPopup(isCorrect) {
      const popup = document.getElementById("popup");
      popup.innerText = isCorrect ? "정답입니다!" : "틀렸습니다!";
      popup.style.display = "block";
      popup.style.opacity = 1;

      // 2초 후 자동으로 팝업 숨기기
      setTimeout(() => {
        popup.style.opacity = 0;
        setTimeout(() => {
          popup.style.display = "none";
          loadNextQuestion(); // 다음 문제로 이동
        }, 500); // fade-out 후 숨김
      }, 2000);
    }

    // 문제를 표시하는 함수
    function loadQuestion() {
      const quizContainer = document.getElementById("quiz-container");
      if (currentQuestion < quizData.length) {
        const questionData = quizData[currentQuestion];
        quizContainer.innerHTML = `
    <div class="question">${questionData.question}</div>
    <div class="quiz-content">
    <img src="${questionData.img}" alt="문제 이미지" class="quiz-img">
    <div class="info-box">
      <p>👤 <strong>인물 정보</strong></p>
      <p>${questionData.info}</p>
    </div>

  </div>
  <div class="buttons">
    <button onclick="checkAnswer('O')">O</button>
    <button onclick="checkAnswer('X')">X</button>
  </div>
`;

      } else {
        // 마지막 문제를 마친 후 점수 출력 및 소감문 작성 폼 표시
        quizContainer.innerHTML = `<h2>퀴즈 종료! 당신의 점수는 ${score}점입니다.</h2>`;
        document.getElementById("final-form").style.display = "block"; // 소감문 작성 폼 보이기
      }
    }

    // 사용자가 선택한 답을 확인하는 함수
    function checkAnswer(userAnswer) {
      const correctAnswer = quizData[currentQuestion].answer;
      const isCorrect = userAnswer === correctAnswer;
      if (isCorrect) {
        score++;
      }
      showPopup(isCorrect);
    }

    // 다음 문제로 넘어가는 함수
    function loadNextQuestion() {
      currentQuestion++;
      loadQuestion();
    }

    // 소감 제출 함수
    function submitFeedback() {
      const feedback = document.getElementById("feedback").value;
      if (feedback.trim() === "") {
        alert("소감문을 작성해주세요.");
        return;
      }


      // 팝업 표시
  const popup = document.getElementById("popup");
  popup.innerText = "정보도 한 번 확인해 주세요";
  popup.style.display = "block";
  popup.style.opacity = 1;

  // 2초 후 main.html로 이동
  setTimeout(() => {
    popup.style.opacity = 0;
    setTimeout(() => {
      popup.style.display = "none";
      window.location.href = "main.html";
    }, 500); // fade-out 시간
  }, 2000);

    }
  </script>

</body>
</html>
