<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>OX 퀴즈 15문제</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 20px;
    }
    #popup {
      display: none;
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px 30px;
      border-radius: 10px;
      font-size: 1.5em;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.5s;
    }
    img {
      width: 300px;
    }
    .question {
      font-size: 1.5em;
      margin: 20px 0;
    }
    .buttons button {
      font-size: 1.2em;
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
    }
    .form-container {
      margin-top: 50px;
    }
    #final-form {
      display: none;
      margin-top: 30px;
    }
    textarea {
      width: 300px;
      height: 150px;
      margin-top: 10px;
      font-size: 1.2em;
    }
  </style>
</head>
<body>

  <h1>OX 퀴즈 15문제</h1>

  <!-- 사용자 정보 입력 폼 -->
  <div id="user-form" class="form-container">
    <h2>퀴즈를 시작하기 전에 정보를 입력해주세요!</h2>
    <label for="username">이름:</label>
    <input type="text" id="username" required><br><br>
    <label for="phone">전화번호:</label>
    <input type="tel" id="phone" required><br><br>
    <button onclick="startQuiz()">퀴즈 시작</button>
  </div>

  <div id="quiz-container" style="display:none;">
    <!-- 문제 내용이 여기에 동적으로 삽입됩니다. -->
  </div>

  <div id="popup"></div>

  <!-- 소감문 작성 폼 -->
  <div id="final-form">
    <h2>퀴즈가 끝났습니다! 소감문을 작성해주세요:</h2>
    <textarea id="feedback" placeholder="소감을 적어주세요..."></textarea><br>
    <button onclick="submitFeedback()">소감 제출</button>
  </div>

  <script>
    let username = '';
    let phone = '';

    // 사용자 정보를 입력받고 퀴즈 시작
    function startQuiz() {
      username = document.getElementById("username").value;
      phone = document.getElementById("phone").value;

      if (!username || !phone) {
        alert("이름과 전화번호를 모두 입력해주세요.");
        return;
      }

      // 사용자 정보 입력 폼 숨기기
      document.getElementById("user-form").style.display = "none";

      // 퀴즈 화면 보이기
      document.getElementById("quiz-container").style.display = "block";

      loadQuestion(); // 첫 번째 문제 로드
    }

    // 퀴즈 데이터 (이미지 파일은 로컬에서 불러옵니다.)
    const quizData = [
      { question: "이 사진은 고양이이다.", img: "images/q1.jpg", answer: "O" },
      { question: "이것은 오렌지이다.", img: "images/q2.jpg", answer: "X" },
      { question: "이것은 사과이다.", img: "images/q3.jpg", answer: "O" },
      { question: "이 사진은 강아지이다.", img: "images/q4.jpg", answer: "O" },
      { question: "이것은 자동차이다.", img: "images/q5.jpg", answer: "X" },
      { question: "이 사진은 바다이다.", img: "images/q6.jpg", answer: "O" },
      { question: "이것은 과일이다.", img: "images/q7.jpg", answer: "X" },
      { question: "이 사진은 배이다.", img: "images/q8.jpg", answer: "O" },
      { question: "이것은 집이다.", img: "images/q9.jpg", answer: "X" },
      { question: "이 사진은 산이다.", img: "images/q10.jpg", answer: "O" },
      { question: "이것은 기계이다.", img: "images/q11.jpg", answer: "X" },
      { question: "이 사진은 공원이다.", img: "images/q12.jpg", answer: "O" },
      { question: "이것은 동물이다.", img: "images/q13.jpg", answer: "X" },
      { question: "이 사진은 나무이다.", img: "images/q14.jpg", answer: "O" },
      { question: "이것은 꽃이다.", img: "images/q15.jpg", answer: "X" }
    ];

    let currentQuestion = 0; // 현재 문제 번호
    let score = 0; // 점수

    // 팝업을 표시하는 함수
    function showPopup(isCorrect) {
      const popup = document.getElementById("popup");
      popup.innerText = isCorrect ? "정답입니다!" : "틀렸습니다!";
      popup.style.display = "block";
      popup.style.opacity = 1;

      // 2초 후 자동으로 팝업 숨기기
      setTimeout(() => {
        popup.style.opacity = 0;
        setTimeout(() => {
          popup.style.display = "none";
          loadNextQuestion(); // 다음 문제로 이동
        }, 500); // fade-out 후 숨김
      }, 2000);
    }

    // 문제를 표시하는 함수
    function loadQuestion() {
      const quizContainer = document.getElementById("quiz-container");
      if (currentQuestion < quizData.length) {
        const questionData = quizData[currentQuestion];
        quizContainer.innerHTML = `
          <img src="${questionData.img}" alt="문제 이미지">
          <div class="question">${questionData.question}</div>
          <div class="buttons">
            <button onclick="checkAnswer('O')">O</button>
            <button onclick="checkAnswer('X')">X</button>
          </div>
        `;
      } else {
        // 마지막 문제를 마친 후 점수 출력 및 소감문 작성 폼 표시
        quizContainer.innerHTML = `<h2>퀴즈 종료! 당신의 점수는 ${score}점입니다.</h2>`;
        document.getElementById("final-form").style.display = "block"; // 소감문 작성 폼 보이기
      }
    }

    // 사용자가 선택한 답을 확인하는 함수
    function checkAnswer(userAnswer) {
      const correctAnswer = quizData[currentQuestion].answer;
      const isCorrect = userAnswer === correctAnswer;
      if (isCorrect) {
        score++;
      }
      showPopup(isCorrect);
    }

    // 다음 문제로 넘어가는 함수
    function loadNextQuestion() {
      currentQuestion++;
      loadQuestion();
    }

    // 소감 제출 함수
    function submitFeedback() {
      const feedback = document.getElementById("feedback").value;
      if (feedback.trim() === "") {
        alert("소감문을 작성해주세요.");
        return;
      }
      alert("소감문이 제출되었습니다. 감사합니다!");
      // 소감문을 서버로 보내거나 처리하는 로직을 추가할 수 있습니다.
    }
  </script>

</body>
</html>
